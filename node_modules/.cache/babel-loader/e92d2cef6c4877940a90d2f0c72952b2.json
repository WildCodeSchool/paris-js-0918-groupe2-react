{"ast":null,"code":"import _classCallCheck from \"/home/ben/Documents/React/paris-js-0918-groupe2-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ben/Documents/React/paris-js-0918-groupe2-react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/ben/Documents/React/paris-js-0918-groupe2-react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/ben/Documents/React/paris-js-0918-groupe2-react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/ben/Documents/React/paris-js-0918-groupe2-react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/ben/Documents/React/paris-js-0918-groupe2-react/src/components/actions.js\";\nimport React, { Component } from \"react\";\nimport \"./actions.css\"; // import Tabfacture from \"./tabfacture\";\n// import Tabavoir from \"./tabavoir\";\n\nimport Axios from \"axios\";\nimport Autocomplete from \"./autocomplete\";\nimport { throws } from \"assert\"; // import { throws } from \"assert\";\n\nvar Actions =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Actions, _Component);\n\n  function Actions() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Actions);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Actions)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      creanciers: [],\n      creanciersFiltered: [],\n      debiteurs: [],\n      debiteursFiltered: [],\n      idCreancierSelected: 0,\n      idDebiteurSelected: 0,\n      creanciersNames: [],\n      debiteursNames: [],\n      checkboxFacture: true,\n      checkboxProduits: false,\n      checkboxServices: false,\n      honoraires: \"\",\n      isLoaded: false,\n      nomCreancierSelected: \"\",\n      nomDebiteurSelected: \"\",\n      actions: [],\n      actionsFiltered: []\n    };\n\n    _this.handleNameCreancier = function (name) {\n      var myCreancier = _this.state.creanciersFiltered.filter(function (c) {\n        return c.denomination_sociale.includes(name);\n      });\n\n      if (myCreancier[0].id !== undefined) {\n        _this.setState({\n          idCreancierSelected: myCreancier[0].id,\n          nomCreancierSelected: myCreancier[0].denomination_sociale\n        });\n      }\n    };\n\n    _this.handleNameDebiteur = function (name) {\n      var myDebiteur = _this.state.debiteursFiltered.filter(function (d) {\n        return d.denomination_sociale.includes(name);\n      });\n\n      if (myDebiteur[0].id !== undefined) {\n        _this.setState({\n          idDebiteurSelected: myDebiteur[0].id,\n          nomDebiteurSelected: myDebiteur[0].denomination_sociale\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Actions, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      Axios.get(\"http://localhost:4848/api/creanciers\").then(function (response) {\n        _this2.setState({\n          // returns all creanciers\n          creanciers: response.data,\n          // returns all creanciers whose active status is true\n          creanciersFiltered: response.data.filter(function (creancier) {\n            return creancier.active;\n          }),\n          creanciersNames: response.data.filter(function (creancier) {\n            return creancier.denomination_sociale !== null;\n          }).map(function (creancier) {\n            return creancier.denomination_sociale;\n          })\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n      Axios.get(\"http://localhost:4848/api/debiteurs\").then(function (response) {\n        _this2.setState({\n          // returns all debiteurs\n          debiteurs: response.data,\n          // returns all debiteurs whose active status is true\n          debiteursFiltered: response.data.filter(function (debiteur) {\n            return debiteur.active;\n          }),\n          debiteursNames: response.data.filter(function (debiteur) {\n            return debiteur.denomination_sociale !== null;\n          }).map(function (debiteur) {\n            return debiteur.denomination_sociale;\n          })\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var _this3 = this;\n\n      if (this.state.idCreancierSelected !== 0 && this.state.idDebiteurSelected !== 0) {\n        Axios.get(\"http://localhost:4848/api/actions\").then(function (response) {\n          _this3.setState({\n            // returns all actions\n            // actions: response.data,\n            // returns filtered actions\n            actionsFiltered: response.data.filter(function (action) {\n              return action.creancierId === _this3.state.idCreancierSelected && action.debiteurId === _this3.state.idDebiteurSelected;\n            }),\n            isLoaded: true\n          });\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }\n    } // handleTabSwitch() {\n    //   return this.state.checkboxFacture ? (\n    //     <Tabfacture pageChangeSub={this.props.pageChangeSub} />\n    //   ) : (\n    //     <Tabavoir pageChangeSub={this.props.pageChangeSub} />\n    //   );\n    // }\n    // handleCheckbox() {\n    //   this.setState({\n    //     checkboxFacture: !this.state.checkboxFacture\n    //   });\n    // }\n    // handleCheckboxDisplay() {\n    //   return this.state.checkboxFacture ? \"factures\" : \"avoirs\";\n    // }\n    // handleProduits() {\n    //   this.setState({\n    //     checkboxProduits: !this.state.checkboxProduits\n    //   });\n    // }\n    // handleServices() {\n    //   this.setState({\n    //     checkboxServices: !this.state.checkboxServices\n    //   });\n    // }\n    // handleHonoraires = e => {\n    //   this.setState({\n    //     honoraires: e.target.value\n    //   });\n    // };\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.isLoaded === false) {\n        return React.createElement(\"div\", {\n          className: \"fl w-100\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"fl w-100 tc\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          className: \"f2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        }, \"Actions\")), React.createElement(\"div\", {\n          className: \"fl w-100 tc\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"fl w-40\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"f3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }, \"S\\xE9lectionner un cr\\xE9ancier\"), React.createElement(\"form\", {\n          action: \"creancier\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, React.createElement(Autocomplete, {\n          suggestions: this.state.creanciersNames,\n          name: this.handleNameCreancier,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"fl w-20 \",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"f2 lh-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        }, \"vs\")), React.createElement(\"div\", {\n          className: \"fl w-40\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"f3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172\n          },\n          __self: this\n        }, \"S\\xE9lectionner un d\\xE9biteur\"), React.createElement(\"form\", {\n          action: \"debiteur\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }, React.createElement(Autocomplete, {\n          suggestions: this.state.debiteursNames,\n          name: this.handleNameDebiteur,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174\n          },\n          __self: this\n        })))));\n      } else {\n        return React.createElement(\"div\", {\n          className: \"fl w-100\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 249\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"fl w-100 tc\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          className: \"f2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 251\n          },\n          __self: this\n        }, this.state.nomCreancierSelected, \" vs\", \" \", this.state.nomDebiteurSelected)), React.createElement(\"div\", {\n          className: \"fl w-100 tc\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 256\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"fl w-40\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 257\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"f3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 258\n          },\n          __self: this\n        }, \"S\\xE9lectionner un cr\\xE9ancier\"), React.createElement(\"form\", {\n          action: \"creancier\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 259\n          },\n          __self: this\n        }, React.createElement(Autocomplete, {\n          suggestions: this.state.creanciersNames,\n          name: this.handleNameCreancier,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 260\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"fl w-20 \",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"f2 lh-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 267\n          },\n          __self: this\n        }, \"vs\")), React.createElement(\"div\", {\n          className: \"fl w-40\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 269\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"f3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 270\n          },\n          __self: this\n        }, \"S\\xE9lectionner un d\\xE9biteur\"), React.createElement(\"form\", {\n          action: \"debiteur\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 271\n          },\n          __self: this\n        }, React.createElement(Autocomplete, {\n          suggestions: this.state.debiteursNames,\n          name: this.handleNameDebiteur,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 272\n          },\n          __self: this\n        })))));\n      }\n    }\n  }]);\n\n  return Actions;\n}(Component);\n\nexport default Actions;","map":{"version":3,"sources":["/home/ben/Documents/React/paris-js-0918-groupe2-react/src/components/actions.js"],"names":["React","Component","Axios","Autocomplete","throws","Actions","state","creanciers","creanciersFiltered","debiteurs","debiteursFiltered","idCreancierSelected","idDebiteurSelected","creanciersNames","debiteursNames","checkboxFacture","checkboxProduits","checkboxServices","honoraires","isLoaded","nomCreancierSelected","nomDebiteurSelected","actions","actionsFiltered","handleNameCreancier","name","myCreancier","filter","c","denomination_sociale","includes","id","undefined","setState","handleNameDebiteur","myDebiteur","d","get","then","response","data","creancier","active","map","catch","error","console","log","debiteur","action","creancierId","debiteurId"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./actions.css\";\n// import Tabfacture from \"./tabfacture\";\n// import Tabavoir from \"./tabavoir\";\nimport Axios from \"axios\";\nimport Autocomplete from \"./autocomplete\";\nimport { throws } from \"assert\";\n// import { throws } from \"assert\";\n\nclass Actions extends Component {\n  state = {\n    creanciers: [],\n    creanciersFiltered: [],\n    debiteurs: [],\n    debiteursFiltered: [],\n    idCreancierSelected: 0,\n    idDebiteurSelected: 0,\n    creanciersNames: [],\n    debiteursNames: [],\n    checkboxFacture: true,\n    checkboxProduits: false,\n    checkboxServices: false,\n    honoraires: \"\",\n    isLoaded: false,\n    nomCreancierSelected: \"\",\n    nomDebiteurSelected: \"\",\n    actions: [],\n    actionsFiltered: []\n  };\n\n  componentDidMount() {\n    Axios.get(\"http://localhost:4848/api/creanciers\")\n      .then(response => {\n        this.setState({\n          // returns all creanciers\n          creanciers: response.data,\n          // returns all creanciers whose active status is true\n          creanciersFiltered: response.data.filter(\n            creancier => creancier.active\n          ),\n          creanciersNames: response.data\n            .filter(creancier => creancier.denomination_sociale !== null)\n            .map(creancier => creancier.denomination_sociale)\n        });\n      })\n      .catch(error => {\n        console.log(error);\n      });\n    Axios.get(\"http://localhost:4848/api/debiteurs\")\n      .then(response => {\n        this.setState({\n          // returns all debiteurs\n          debiteurs: response.data,\n          // returns all debiteurs whose active status is true\n          debiteursFiltered: response.data.filter(debiteur => debiteur.active),\n          debiteursNames: response.data\n            .filter(debiteur => debiteur.denomination_sociale !== null)\n            .map(debiteur => debiteur.denomination_sociale)\n        });\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  }\n\n  componentDidUpdate() {\n    if (\n      this.state.idCreancierSelected !== 0 &&\n      this.state.idDebiteurSelected !== 0\n    ) {\n      Axios.get(\"http://localhost:4848/api/actions\")\n        .then(response => {\n          this.setState({\n            // returns all actions\n            // actions: response.data,\n            // returns filtered actions\n            actionsFiltered: response.data.filter(\n              action =>\n                action.creancierId === this.state.idCreancierSelected &&\n                action.debiteurId === this.state.idDebiteurSelected\n            ),\n            isLoaded: true\n          });\n        })\n        .catch(error => {\n          console.log(error);\n        });\n    }\n  }\n\n  // handleTabSwitch() {\n  //   return this.state.checkboxFacture ? (\n  //     <Tabfacture pageChangeSub={this.props.pageChangeSub} />\n  //   ) : (\n  //     <Tabavoir pageChangeSub={this.props.pageChangeSub} />\n  //   );\n  // }\n\n  // handleCheckbox() {\n  //   this.setState({\n  //     checkboxFacture: !this.state.checkboxFacture\n  //   });\n  // }\n\n  // handleCheckboxDisplay() {\n  //   return this.state.checkboxFacture ? \"factures\" : \"avoirs\";\n  // }\n\n  // handleProduits() {\n  //   this.setState({\n  //     checkboxProduits: !this.state.checkboxProduits\n  //   });\n  // }\n\n  // handleServices() {\n  //   this.setState({\n  //     checkboxServices: !this.state.checkboxServices\n  //   });\n  // }\n\n  // handleHonoraires = e => {\n  //   this.setState({\n  //     honoraires: e.target.value\n  //   });\n  // };\n\n  handleNameCreancier = name => {\n    let myCreancier = this.state.creanciersFiltered.filter(c =>\n      c.denomination_sociale.includes(name)\n    );\n    if (myCreancier[0].id !== undefined) {\n      this.setState({\n        idCreancierSelected: myCreancier[0].id,\n        nomCreancierSelected: myCreancier[0].denomination_sociale\n      });\n    }\n  };\n\n  handleNameDebiteur = name => {\n    let myDebiteur = this.state.debiteursFiltered.filter(d =>\n      d.denomination_sociale.includes(name)\n    );\n    if (myDebiteur[0].id !== undefined) {\n      this.setState({\n        idDebiteurSelected: myDebiteur[0].id,\n        nomDebiteurSelected: myDebiteur[0].denomination_sociale\n      });\n    }\n  };\n\n  render() {\n    if (this.state.isLoaded === false) {\n      return (\n        <div className=\"fl w-100\">\n          <div className=\"fl w-100 tc\">\n            <h1 className=\"f2\">Actions</h1>\n          </div>\n          <div className=\"fl w-100 tc\">\n            <div className=\"fl w-40\">\n              <p className=\"f3\">Sélectionner un créancier</p>\n              <form action=\"creancier\">\n                <Autocomplete\n                  suggestions={this.state.creanciersNames}\n                  name={this.handleNameCreancier}\n                />\n              </form>\n            </div>\n            <div className=\"fl w-20 \">\n              <p className=\"f2 lh-title\">vs</p>\n            </div>\n            <div className=\"fl w-40\">\n              <p className=\"f3\">Sélectionner un débiteur</p>\n              <form action=\"debiteur\">\n                <Autocomplete\n                  suggestions={this.state.debiteursNames}\n                  name={this.handleNameDebiteur}\n                />\n              </form>\n            </div>\n          </div>\n\n          {/* <div className=\" tableau fl w-100 pa4 \">\n          <div className=\"overflow-auto\">\n            <table className=\"f6 w-100 center\" cellSpacing=\"0\">\n              <thead>\n                <tr className=\"stripe-dark\">\n                  <th>Créancier</th>\n                  <th>Débiteur</th>\n                  <th>Action</th>\n                  <th>Créée le</th>\n                  <th>Sélection</th>\n                </tr>\n              </thead>\n              <tbody className=\"lh-copy\">\n                {myDebiteurs\n                  .sort((a, b) => b.id - a.id)\n                  .slice(0, 10)\n                  .map(debiteur => {\n                    return (\n                      <tr\n                        className=\"stripe-dark\"\n                        key={`${myReloadCounter}-${\n                          debiteur.denomination_sociale\n                        }`}\n                      >\n                        <td>{debiteur.denomination_sociale}</td>\n                        <td>{debiteur.forme_juridique}</td>\n                        <td>{debiteur.pays_siege}</td>\n                        <td>\n                          <NavLink to=\"/dashboard/formDebiteur\">\n                            <img\n                              className=\"icone pointer\"\n                              src={modifier}\n                              alt=\"modifier\"\n                              onClick={() =>\n                                this.props.pageChangeSub(\n                                  \"FormDebiteur\",\n                                  0,\n                                  `${debiteur.id}`\n                                )\n                              }\n                            />\n                          </NavLink>\n                        </td>\n                        <td>\n                          <img\n                            className=\"icone pointer\"\n                            src={supprimer}\n                            alt=\"supprimer\"\n                            onClick={() =>\n                              this.handleDelete(\n                                debiteur.id,\n                                debiteur.denomination_sociale\n                              )\n                            }\n                          />\n                        </td>\n                      </tr>\n                    );\n                  })}\n              </tbody>\n            </table>\n          </div>\n        </div> */}\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"fl w-100\">\n          <div className=\"fl w-100 tc\">\n            <h1 className=\"f2\">\n              {this.state.nomCreancierSelected} vs{\" \"}\n              {this.state.nomDebiteurSelected}\n            </h1>\n          </div>\n          <div className=\"fl w-100 tc\">\n            <div className=\"fl w-40\">\n              <p className=\"f3\">Sélectionner un créancier</p>\n              <form action=\"creancier\">\n                <Autocomplete\n                  suggestions={this.state.creanciersNames}\n                  name={this.handleNameCreancier}\n                />\n              </form>\n            </div>\n            <div className=\"fl w-20 \">\n              <p className=\"f2 lh-title\">vs</p>\n            </div>\n            <div className=\"fl w-40\">\n              <p className=\"f3\">Sélectionner un débiteur</p>\n              <form action=\"debiteur\">\n                <Autocomplete\n                  suggestions={this.state.debiteursNames}\n                  name={this.handleNameDebiteur}\n                />\n              </form>\n            </div>\n          </div>\n        </div>\n      );\n    }\n  }\n}\n\nexport default Actions;\n"]},"metadata":{},"sourceType":"module"}